# Protei Monitoring - Trace and CDR Configuration
# CDR generation and logging settings

# =============================================================================
# CDR (Call Detail Record) Settings
# =============================================================================

# CDR Enable/Disable
CDR_ENABLED=true
CDR_BASE_DIR="/usr/protei/Protei_Monitoring/cdr"

# CDR Format
CDR_FORMAT="CSV"  # CSV, JSON, or BOTH
CDR_INCLUDE_HEX=false  # Include raw message hex in CDR
CDR_INCLUDE_PARSED=true  # Include parsed fields

# CDR Fields (comma-separated)
CDR_FIELDS="timestamp,imsi,msisdn,tid,cell_id,location,procedure,protocol,cause_code,vendor_id,result,latency,error_message"

# CDR Organization
CDR_SEPARATE_BY_PROTOCOL=true
CDR_SEPARATE_BY_NETWORK=true  # 2G, 3G, 4G, 5G
CDR_SEPARATE_BY_GENERATION=true

# CDR File Management
CDR_ROTATION_INTERVAL="daily"  # hourly, daily, weekly
CDR_MAX_FILE_SIZE_MB=1024  # 1GB
CDR_COMPRESS_ON_ROTATION=true
CDR_COMPRESSION_FORMAT="gzip"  # gzip, bzip2, xz

# CDR Retention
CDR_RETENTION_DAYS=90
CDR_AUTO_DELETE_OLD=true

# =============================================================================
# Protocol-Specific CDR Paths
# =============================================================================

CDR_MAP_DIR="$CDR_BASE_DIR/MAP"
CDR_CAP_DIR="$CDR_BASE_DIR/CAP"
CDR_INAP_DIR="$CDR_BASE_DIR/INAP"
CDR_DIAMETER_DIR="$CDR_BASE_DIR/Diameter"
CDR_GTP_DIR="$CDR_BASE_DIR/GTP"
CDR_PFCP_DIR="$CDR_BASE_DIR/PFCP"
CDR_HTTP_DIR="$CDR_BASE_DIR/HTTP"
CDR_NGAP_DIR="$CDR_BASE_DIR/NGAP"
CDR_S1AP_DIR="$CDR_BASE_DIR/S1AP"
CDR_NAS_DIR="$CDR_BASE_DIR/NAS"

# =============================================================================
# Network-Specific CDR Paths
# =============================================================================

CDR_2G_DIR="$CDR_BASE_DIR/2G"
CDR_3G_DIR="$CDR_BASE_DIR/3G"
CDR_4G_DIR="$CDR_BASE_DIR/4G"
CDR_5G_DIR="$CDR_BASE_DIR/5G"

# Traffic Type CDRs
CDR_ROAMING_DIR="$CDR_BASE_DIR/Roaming"
CDR_INTERNATIONAL_DIR="$CDR_BASE_DIR/International"
CDR_LOCAL_DIR="$CDR_BASE_DIR/Local"

# =============================================================================
# Real-time CDR Streaming
# =============================================================================

# CDR Streaming (for external systems)
CDR_STREAMING_ENABLED=false
CDR_STREAMING_TYPE="kafka"  # kafka, rabbitmq, file
CDR_STREAMING_ENDPOINT="localhost:9092"
CDR_STREAMING_TOPIC="protei.cdr"

# =============================================================================
# Trace Logging Settings
# =============================================================================

# Trace Enable/Disable
TRACE_ENABLED=true
TRACE_LEVEL="info"  # debug, info, warning, error

# Protocol-Level Tracing
TRACE_MAP=true
TRACE_CAP=true
TRACE_INAP=true
TRACE_DIAMETER=true
TRACE_GTP=true
TRACE_PFCP=true
TRACE_HTTP=true
TRACE_NGAP=true
TRACE_S1AP=true
TRACE_NAS=true

# Trace Detail Level
TRACE_INCLUDE_HEADERS=true
TRACE_INCLUDE_PAYLOAD=true
TRACE_INCLUDE_AVP_DETAILS=true
TRACE_INCLUDE_IE_DETAILS=true

# Trace Filtering
TRACE_FILTER_BY_IMSI=false
TRACE_IMSI_LIST=""  # Comma-separated list of IMSIs
TRACE_FILTER_BY_PROCEDURE=false
TRACE_PROCEDURE_LIST=""  # Comma-separated procedures

# =============================================================================
# PCAP Dump Settings
# =============================================================================

# PCAP Capture
PCAP_CAPTURE_ENABLED=true
PCAP_SAVE_DIR="/usr/protei/Protei_Monitoring/pcap"

# PCAP Filtering
PCAP_FILTER_EXPRESSION=""  # BPF filter expression
PCAP_CAPTURE_INTERFACES="any"  # Comma-separated interfaces

# PCAP File Management
PCAP_MAX_FILE_SIZE_MB=2048  # 2GB
PCAP_ROTATION_INTERVAL="hourly"
PCAP_RETENTION_DAYS=7
PCAP_COMPRESS_ON_ROTATION=true

# =============================================================================
# Session Recording
# =============================================================================

# Session Dumps
SESSION_DUMP_ENABLED=true
SESSION_DUMP_DIR="/usr/protei/Protei_Monitoring/sessions"
SESSION_DUMP_FORMAT="JSON"  # JSON or PCAP

# Session Filtering
SESSION_DUMP_FAILURES_ONLY=false
SESSION_DUMP_VIP_SUBSCRIBERS=true
SESSION_DUMP_ROAMING_ONLY=false

# Session Retention
SESSION_RETENTION_DAYS=30
SESSION_AUTO_DELETE_OLD=true
