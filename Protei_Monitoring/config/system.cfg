# Protei Monitoring - System Configuration
# General system parameters and server settings

# =============================================================================
# Server Settings
# =============================================================================

SERVER_HOST="0.0.0.0"
SERVER_PORT=8443
SERVER_ENABLE_TLS=true
SERVER_TLS_CERT="/usr/protei/Protei_Monitoring/config/certs/server.crt"
SERVER_TLS_KEY="/usr/protei/Protei_Monitoring/config/certs/server.key"

# Metrics Server
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH="/metrics"

# WebSocket Settings
WEBSOCKET_ENABLED=true
WEBSOCKET_UPDATE_INTERVAL=5  # seconds
WEBSOCKET_MAX_CONNECTIONS=1000

# =============================================================================
# Authentication & Security
# =============================================================================

# JWT Authentication
JWT_ENABLED=true
JWT_SECRET="CHANGE_ME_RANDOM_SECRET_KEY_MIN_32_CHARS"
JWT_EXPIRY=3600  # seconds (1 hour)
JWT_REFRESH_ENABLED=true
JWT_REFRESH_EXPIRY=604800  # seconds (7 days)

# Session Management
SESSION_TIMEOUT=3600  # seconds
SESSION_MAX_PER_USER=5
SESSION_TRACK_IP=true

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_MAX_AGE_DAYS=90

# Login Security
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=1800  # seconds (30 minutes)
LOCKOUT_RESET_TIME=3600  # seconds (1 hour)

# =============================================================================
# RBAC (Role-Based Access Control)
# =============================================================================

RBAC_ENABLED=true
RBAC_DEFAULT_ROLE="noc_viewer"
RBAC_ROLES="admin,engineer,noc_viewer,security_auditor"

# =============================================================================
# Performance & Resource Settings
# =============================================================================

# Worker Threads
WORKER_THREADS=8  # Number of worker threads for processing
MAX_GOROUTINES=10000  # Maximum Go routines

# Buffer Settings
CAPTURE_BUFFER_SIZE=67108864  # 64MB
MESSAGE_QUEUE_SIZE=10000
EVENT_BUFFER_SIZE=5000

# Memory Limits
MAX_MEMORY_MB=4096  # 4GB soft limit
GC_TARGET_PERCENTAGE=80  # Go GC target

# CPU Settings
MAX_CPU_CORES=0  # 0 = use all available cores
CPU_AFFINITY=""  # Empty = no CPU affinity

# =============================================================================
# Application Behavior
# =============================================================================

# Startup
AUTO_START_CAPTURE=true
AUTO_LOAD_DICTIONARIES=true
VALIDATE_LICENSE_ON_START=true

# Graceful Shutdown
SHUTDOWN_TIMEOUT=30  # seconds
DRAIN_CONNECTIONS_ON_SHUTDOWN=true

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30  # seconds
HEALTH_CHECK_ENDPOINT="/health"

# =============================================================================
# Feature Flags
# =============================================================================

FEATURE_AI_ANALYSIS=true
FEATURE_FLOW_RECONSTRUCTION=true
FEATURE_SUBSCRIBER_CORRELATION=true
FEATURE_KNOWLEDGE_BASE=true
FEATURE_WEB_CONFIGURATION=true
FEATURE_API_ENABLED=true

# =============================================================================
# Monitoring & Metrics
# =============================================================================

# System Resource Monitoring
MONITOR_SYSTEM_RESOURCES=true
MONITOR_INTERVAL=10  # seconds
MONITOR_CPU=true
MONITOR_MEMORY=true
MONITOR_DISK=true
MONITOR_NETWORK=true

# Application Metrics
COLLECT_METRICS=true
METRICS_RETENTION_HOURS=168  # 7 days

# Prometheus Export
PROMETHEUS_ENABLED=true
PROMETHEUS_NAMESPACE="protei"
PROMETHEUS_SUBSYSTEM="monitoring"

# =============================================================================
# Development & Debug
# =============================================================================

# Debug Mode
DEBUG_MODE=false
DEBUG_LOG_REQUESTS=false
DEBUG_LOG_RESPONSES=false

# Profiling (pprof)
PROFILING_ENABLED=false
PROFILING_PORT=6060

# Verbose Logging
VERBOSE_STARTUP=false
VERBOSE_SHUTDOWN=false
